#!/usr/bin/env python
from json import dumps
from os import listdir as ls
from os.path import isfile, getsize, join
from sys import argv


def walk(p):
    return getsize(p) if isfile(p) else {n: walk(join(p, n)) for n in ls(p)}


if len(argv) == 1:
    argv.append(".")

for p in argv[1:]:
    print(dumps(walk(p), sort_keys=True, separators=(',', ':')))
